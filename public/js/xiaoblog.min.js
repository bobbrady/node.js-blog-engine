/*! xiaoblog 29-01-2015 */
"use strict";var xiaoBlog=function(){function a(a,b){var c=document.getElementById(a),d=document.getElementById(b);d.innerHTML=marked(c.value)}function b(a,b,c){var d="#"+a,e="#"+b,f="#"+c;$(d).is(":visible")?($(e).html(marked($(d).val())),$(f).html("Edit"),$(d).toggle(),$(e).toggle()):($(f).html("Preview"),$(e).toggle(),$(d).toggle())}function c(a,b,c,d){if(g=b,h=c,i=d,document.getElementById(i).value){j=document.getElementById(i).value.split(",");for(var k=document.getElementById(g),l=0;l<j.length;l++)f(k,j[l])}return $("#"+a).ajaxForm({dataType:"json",success:e}),!1}function d(a,b){$("input[id="+a+"]").change(function(){$("#"+b).val($(this).val().replace("C:\\fakepath\\",""))})}function e(a){var b=a.uploadFile;j.push(b.path.replace("public",""));var c=document.getElementById(g);f(c,b.path),$("#"+h).removeClass("hidden"),document.getElementById(i).value=j.toString()}function f(a,b){var c=document.createElement("li");c.appendChild(document.createTextNode(b.replace("public",""))),a.appendChild(c)}var g,h,i,j=[];return{markdownToHtml:a,previewMarkdown:b,initXhr:c,captureHiddenFile:d}}();